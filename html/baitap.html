<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <head>
        <title>TYNISSHOES.VN - Website Bán Giày</title>
        <link rel="icon" type="image/png" href="../img/logo.png">
    </head>

    <link href="../css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="../js/jquery-3.7.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
    <script src="../js/bootstrap.bundle.js"></script>

    <style>
        .product-card {
            margin-bottom: 30px;
            cursor: pointer;
        }
        
        .product-card img {
            height: 180px;
            object-fit: cover;
        }
        
        body {
            padding-top: 70px;
        }
        
        #about {
            display: none;
        }
        
        #productDetail {
            display: none;
        }
        
        #cartSection {
            display: none;
            min-height: 90vh;
        }
        
        .navbar .nav-item:hover {
            background-color: rgba(252, 159, 78, 0.811);
            border-radius: 30px;
        }
        
        .navbar-nav .nav-link.active {
            background-color: rgba(252, 159, 78, 0.811);
            border-radius: 30px;
        }
        
        .nav-item.has-submenu {
            position: relative;
        }
        
        .nav-item.has-submenu .submenu {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            background-color: #fff;
            border: 1px solid #ccc;
            padding: 0.5rem 1rem;
            margin: 0;
            list-style: none;
            z-index: 999;
        }
        
        .nav-item.has-submenu:hover .submenu {
            display: block;
        }
        
        .nav-item.has-submenu .submenu {
            border-radius: 6px;
        }
        
        .nav-item.has-submenu .submenu li a {
            padding: 0.25rem 0.5rem;
            display: block;
            color: #333;
            text-decoration: none;
        }
        
        .nav-item.has-submenu .submenu li a:hover {
            background-color: #f1f1f1;
            color: #000;
        }
        
        #carouselExampleIndicators {
            margin-top: 60px;
        }
        
        .carousel-inner {
            display: flex;
            align-items: center;
            height: 150px;
        }
        
        .carousel-item img {
            max-width: 100%;
            max-height: 50%;
        }
        
        .navbar-nav {
            margin-top: 50px;
        }
        
        #searchForm {
            margin-top: 5px;
            margin-right: 5px;
        }
        
        #openCartBtn {
            margin-top: 5px;
        }
        
        .top-bar {
            position: fixed;
            top: 10;
            width: 100%;
            z-index: 1000;
        }
        
        .navbar {
            position: fixed;
            top: 20px;
            width: 100%;
            z-index: 999;
        }
        
        .navbar-nav {
            display: flex;
            justify-content: center;
            width: 100%;
        }
        
        .nav-link.text-white:hover {
            background-color: rgba(255, 255, 255, 0.2);
            /* Hiệu ứng hover */
            border-radius: 30px;
        }
        
        #loginLink {
            padding: 0.5rem 1rem;
            color: #333;
            text-decoration: none;
        }
        
        #loginLink:hover {
            background-color: rgba(252, 159, 78, 0.811);
            border-radius: 30px;
        }
        
        .top-bar .d-flex {
            gap: 10px;
        }
        /* Modal Styles */
        
        .modal-content {
            background-color: white;
            padding: 20px;
            border-radius: 5px;
            width: 400px;
            max-width: 90%;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .modal-title {
            font-size: 1.25rem;
            font-weight: bold;
        }
        
        .btn-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        .form-label {
            display: block;
            margin-bottom: 5px;
        }
        
        .form-control {
            width: 100%;
            padding: 8px;
            margin-bottom: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        
        .form-check {
            margin-bottom: 15px;
        }
        
        .btn:hover {
            background-color: #555;
        }
        
        .text-danger {
            color: red;
            margin-top: 10px;
        }
        
        .text-center {
            text-align: center;
        }
        
        .text-muted {
            color: #666;
            text-decoration: none;
        }
        /* User Container Styles */
        
        .user-container {
            position: relative;
            display: inline-block;
        }
        
        .logout-btn {
            display: none;
            position: absolute;
            top: 100%;
            left: 0;
            z-index: 1000;
            padding: 0.25rem 0.5rem;
            font-size: 14px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 4px;
        }
        
        .user-container:hover .logout-btn {
            display: block;
        }
    </style>

</head>

<body>

    <header>
        <!-- Phần trên: Logo, Tìm kiếm, Hotline, Giỏ hàng, Đăng nhập -->
        <div class="top-bar fixed-top" style="background-color: #fff; border-bottom: 1px solid #ddd;">
            <div class="container-fluid d-flex align-items-center justify-content-between py-1">
                <!-- Logo -->
                <a class="navbar-brand fw-bold d-flex align-items-center" href="#" onclick="goToHome(); return false;">
                    <div class="d-flex flex-column align-items-center">

                        <div class="d-flex align-items-center">
                            <img src="../img/logo.png" alt="Logo" style="height: 50px; margin-right: 5px;">
                            <span>TYNISSHOES.VN</span>
                        </div>
                    </div>
                </a>
                <!-- Thanh tìm kiếm -->
                <form class="d-flex" id="searchForm" style="width: 35%;">
                    <input class="form-control me-1" type="search" id="searchInput" placeholder="Mời gõ từ tìm..." aria-label="Search" style="border: 1px solid #ccc; font-size: 14px; height: 34px;">
                    <button class="btn btn-outline-success" type="submit" style="font-size: 14px; padding: 4px 10px;">Tìm</button>
                </form>
                <!-- Hotline, Giỏ hàng, Đăng nhập -->
                <div class="d-flex align-items-center">
                    <div class="d-flex align-items-center me-2">
                        <i class="bi bi-headset me-1" style="font-size: 14px;"></i>
                        <span style="font-size: 14px;">Hotline: 0908 408 828</span>
                    </div>
                    <a href="#" class="btn btn-secondary position-relative me-2" id="openCartBtn" style="padding: 4px 8px;">
                        <i class="bi bi-cart" style="font-size: 14px;"></i>
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="cartCount" style="font-size: 10px;">
                                0
                            </span>
                    </a>
                    <a href="#" class="nav-link" id="loginLink" data-bs-toggle="modal" data-bs-target="#loginModal" style="font-size: 14px; padding: 0.25rem 0.5rem;">ĐĂNG NHẬP</a>
                </div>
            </div>
        </div>

        <!-- Phần dưới: Menu -->
        <nav class="navbar navbar-expand-lg" style="background-color: #212529;">
            <div class="container-fluid">
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav mx-auto">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#" onclick="goToHome(); return false;">TRANG CHỦ</a>

                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white" href="#about">GIỚI THIỆU</a>
                        </li>
                        <li class="nav-item has-submenu">
                            <a class="nav-link text-white category-link" data-brand="NIKE" href="#">NIKE</a>
                            <ul class="submenu">
                                <li><a class="nav-link category-link" data-brand="NIKE" data-sub="NAM" href="#">Nam</a></li>
                                <li><a class="nav-link category-link" data-brand="NIKE" data-sub="NU" href="#">Nữ</a></li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a class="nav-link text-white category-link" data-brand="ADIDAS" href="#">ADIDAS</a>
                            <ul class="submenu">
                                <li><a class="nav-link category-link" data-brand="ADIDAS" data-sub="NAM" href="#">Nam</a></li>
                                <li><a class="nav-link category-link" data-brand="ADIDAS" data-sub="NU" href="#">Nữ</a></li>
                            </ul>
                        </li>
                        <li class="nav-item has-submenu">
                            <a class="nav-link text-white category-link" data-brand="JORDAN" href="#">JORDAN</a>
                            <ul class="submenu">
                                <li><a class="nav-link category-link" data-brand="JORDAN" data-sub="NAM" href="#">Nam</a></li>
                                <li><a class="nav-link category-link" data-brand="JORDAN" data-sub="NU" href="#">Nữ</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white category-link" data-brand="YEEZY" href="#">YEEZY</a>
                        </li>
                        <li class="nav-item has-submenu">
                            <a class="nav-link text-white category-link" data-brand="GIÀY TENNIS/PICKLEBALL" href="#">SPORT</a>
                            <ul class="submenu">
                                <li><a class="nav-link category-link" data-brand="GIÀY TENNIS/PICKLEBALL" data-sub="TENNIS" href="#">TENNIS</a></li>
                                <li><a class="nav-link category-link" data-brand="GIÀY TENNIS/PICKLEBALL" data-sub="PICKLEBALL" href="#">PICKLEBALL</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link text-white category-link" data-brand="OTHER BRAND" href="#">OTHER BRAND</a>
                        </li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>


    <div id="carouselExampleIndicators" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-indicators">
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="0" class="active"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="1"></button>
            <button type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide-to="2"></button>
        </div>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="../img/km.png" class="d-block " alt="Khuyến Mãi">
            </div>
            <div class="carousel-item">
                <img src="../img/NEWSHOSE.png" class="d-block " alt="Sản Phẩm Mới">
            </div>
            <div class="carousel-item">
                <img src="../img/sLOE.png" class="d-block " alt="Sale Off">
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
            <span class="visually-hidden">Trước</span>
            </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleIndicators" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
            <span class="visually-hidden">Sau</span>
            </button>
    </div>
    <section class="container my-5" id="productsSection">
        <h2 class="text-center mb-4">SẢN PHẨM</h2>
        <div class="row mb-4" id="advancedFilterRow" style="display:none;">
            <div class="col-md-3">
                <label for="sizeFilter" class="form-label">Cỡ Giày</label>
                <select id="sizeFilter" class="form-select">
                <option value="">Tất cả</option>
                <option value="36">36</option>
                <option value="37">37</option>
                <option value="38">38</option>
                <option value="39">39</option>
                <option value="40">40</option>
                <option value="41">41</option>
                <option value="42">42</option>
                <option value="43">43</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="priceFilter" class="form-label">Khoảng Giá</label>
                <select id="priceFilter" class="form-select">
                <option value="">Tất cả</option>
                <option value="under1m">Dưới 1 triệu</option>
                <option value="1to2m">1 - 2 triệu</option>
                <option value="over2m">Trên 2 triệu</option>
                </select>
            </div>
            <div class="col-md-3">
                <label for="sortFilter" class="form-label">Sắp xếp theo</label>
                <select id="sortFilter" class="form-select">
                <option value="">Mặc định</option>
                <option value="asc">Giá thấp đến cao</option>
                <option value="desc">Giá cao đến thấp</option>
                </select>
            </div>
            <div class="col-md-3 d-flex align-items-end">
                <button id="advancedFilterBtn" class="btn btn-warning w-100">
                Tìm Giày Ngay <i class="bi bi-search"></i>
                </button>
            </div>
        </div>
        <div class="row" id="productContainer">

        </div>
    </section>

    <section class="container my-5" id="highlightSection">
        <h2 class="mb-4">SẢN PHẨM NỔI BẬT</h2>
        <div class="row" id="highlightContainer">
        </div>
    </section>

    <section class="container my-5" id="saleSection">
        <h2 class="mb-4">SẢN PHẨM KHUYẾN MÃI</h2>
        <div class="row" id="saleContainer">
        </div>
    </section>
    <section class="container my-5" id="accessorySection">
        <h2 class="mb-4">PHỤ KIỆN</h2>
        <div class="row" id="accessoryContainer">
        </div>
    </section>


    <section id="cartSection" class="container my-5" style="display:none; min-height:90vh;">
        <h2 class="mb-4">GIỎ HÀNG</h2>
        <button id="closeCartBtn" class="btn btn-sm btn-outline-danger mb-3">Đóng</button>
        <ul id="cartItems" class="list-group mb-3">
        </ul>
        <div class="fw-bold text-end fs-5 mb-3">
            Tổng tiền: <span id="cartTotal">0₫</span>
        </div>
        <button class="btn btn-primary" id="checkoutBtn">Thanh Toán</button>
    </section>
    <section id="about" class="container my-5">
        <h2 class="text-center mb-4">Giới Thiệu</h2>
        <h2>
            TYNISSHOES - BƯỚC CHÂN PHONG CÁCH, TỰ TIN TỎA SÁNG</h2>
        <h4>Chào mừng bạn đến với TYNISSHOES, điểm đến lý tưởng dành cho những ai yêu thích giày dép thời trang và chất lượng. Chúng tôi tự hào mang đến những sản phẩm cao cấp với thiết kế hiện đại, phù hợp với mọi phong cách từ năng động, trẻ trung đến lịch
            lãm, sang trọng.</h4>

        <p>🔹 Sản phẩm chất lượng - Chúng tôi lựa chọn kỹ lưỡng từ chất liệu đến kiểu dáng, đảm bảo sự thoải mái và độ bền cao.</p>
        <p>🔹 Giá cả cạnh tranh - Mức giá hợp lý đi đôi với chất lượng, giúp bạn dễ dàng sở hữu đôi giày yêu thích.</p>
        <p>🔹 Dịch vụ tận tâm - Đội ngũ nhân viên sẵn sàng tư vấn và hỗ trợ bạn trong suốt quá trình mua sắm.</p>
        <p>🔹 Xu hướng mới nhất - Liên tục cập nhật các mẫu giày hot trend, giúp bạn luôn dẫn đầu xu hướng thời trang.</p>

        <p>Hãy để TYNISSHOES đồng hành cùng bạn trên từng bước đi, mang đến sự tự tin và phong cách riêng biệt!</p>

        <p>📍 Địa chỉ: 12 nguyenvanbao-p5-Govap-TPHCM</p>
        <p>📞 Hotline: 0123654789</p>
        <p>🌐 Website: tynisshoes.vn</p>

    </section>

    <section id="productDetail" class="container-fluid my-5" style="display:none; min-height: 90vh;">
        <div class="row">
            <div class="col-md-6">
                <img id="detailProductImage" src="" alt="" class="img-fluid">
            </div>
            <div class="col-md-6">
                <h2 id="detailProductName"></h2>
                <p class="text-danger fw-bold fs-4" id="detailProductPrice"></p>
                <div class="mb-3">
                    <label class="form-label">Chọn Size Giày</label>
                    <select class="form-select" id="detailProductSizeSelect"></select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Số Lượng</label>
                    <input type="number" class="form-control" id="detailProductQty" value="1" min="1">
                </div>
                <button class="btn btn-primary me-2" id="detailAddToCartBtn">Thêm vào giỏ</button>
                <button class="btn btn-danger" id="detailBuyNowBtn">Mua ngay</button>
                <div class="mt-3" id="detailProductDesc"></div>
            </div>
        </div>
    </section>
    <div class="modal fade" id="paymentModal" tabindex="-1" aria-labelledby="paymentModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="paymentModalLabel">Thanh Toán</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                </div>
                <div class="modal-body">
                    <div id="paymentProductInfo"></div>
                    <div class="mb-3">
                        <label for="customerName" class="form-label">Tên khách hàng</label>
                        <input type="text" id="customerName" class="form-control" placeholder="Nhập tên khách hàng">
                    </div>
                    <div class="mb-3">
                        <label for="customerPhone" class="form-label">Số điện thoại</label>
                        <input type="text" id="customerPhone" class="form-control" placeholder="Nhập số điện thoại">
                    </div>
                    <div class="mb-3">
                        <label for="paymentMethod" class="form-label">Phương Thức Thanh Toán</label>
                        <select id="paymentMethod" class="form-select" onchange="toggleQRCode()">
                                <option value="cash">Tiền mặt</option>
                                <option value="transfer">Chuyển khoản</option>
                            </select>
                    </div>
                    <div id="qrCodeSection" style="display:none;">
                        <p>Quét QR code để thanh toán:</p>
                        <img src="../img/QR.jpg" alt="QR Code" class="img-fluid">
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="btn btn-primary" onclick="hienHoaDon()">Thanh Toán</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="loginModalLabel">ĐĂNG NHẬP</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                </div>
                <div class="modal-body">
                    <div id="loginForm">
                        <div class="mb-3">
                            <label for="username" class="form-label">Tên tài khoản hoặc địa chỉ email *</label>
                            <input type="text" class="form-control" id="username" required>
                        </div>
                        <div class="mb-3">
                            <label for="password" class="form-label">Mật khẩu *</label>
                            <input type="password" class="form-control" id="password" required>
                        </div>
                        <div class="mb-3 form-check">
                            <input type="checkbox" class="form-check-input" id="rememberMe">
                            <label class="form-check-label" for="rememberMe">Ghi nhớ mật khẩu</label>
                        </div>
                        <button type="button" class="btn btn-primary w-100" id="loginButton" onclick="handleLogin()">ĐĂNG NHẬP</button>
                        <div class="mt-2 text-center">
                            <a href="#" class="text-muted">Quên mật khẩu?</a>
                        </div>
                    </div>
                    <div id="errorMessage" class="text-danger mt-2" style="display: none;"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal hóa đơn -->
    <div class="modal fade" id="invoiceModal" tabindex="-1" aria-labelledby="invoiceModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Hóa đơn</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Đóng"></button>
                </div>
                <div class="modal-body" id="invoiceContent"></div>
            </div>
        </div>
    </div>



    <section id="cartSection" class="container my-5" style="display:none; min-height: 90vh;">
        <h2 class="mb-4">GIỎ HÀNG </h2>
        <button id="closeCartSectionBtn" class="btn btn-sm btn-outline-danger mb-3">Đóng</button>
        <ul id="cartItemsPage" class="list-group mb-3">
        </ul>
        <div class="fw-bold text-end fs-5 mb-3">
            Tổng tiền: <span id="cartTotalPage">0₫</span>
        </div>
        <button class="btn btn-primary" id="checkoutPageBtn">Thanh Toán</button>
    </section>
    <footer class="bg-dark text-white text-center py-3">
        <div class="container">
            <p>&copy; 2025 TYNISSHOES.VN. All Rights Reserved.</p>
        </div>
    </footer>
    </div>
    </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            history.scrollRestoration = 'manual';
        });
        const productsData = [{
            name: "Nike Air Force 1",
            brand: "NIKE",
            sub: "NAM",
            price: 2200000,
            size: 40,
            src: "../img/ar1.webp",
            tags: ["NEW", "HOT"],
            desc: "Mô tả Nike Air Force 1..."
        }, {
            name: "Nike Jordan 1",
            brand: "JORDAN",
            sub: "NAM",
            price: 3500000,
            size: 42,
            src: "../img/jodan1.webp",
            tags: ["LIMITED", "HOT"],
            desc: "Mô tả Jordan 1..."
        }, {
            name: "Adidas Superstar",
            brand: "ADIDAS",
            sub: "NU",
            price: 2000000,
            size: 38,
            src: "../img/adidas superstar.webp",
            tags: ["SALE", "NEW"],
            desc: "Mô tả Adidas Superstar..."
        }, {
            name: "Yeezy Boost 350",
            brand: "YEEZY",
            sub: "NAM",
            price: 5000000,
            size: 40,
            src: "../img/Yeezy 350 V2.jpg",
            tags: ["HOT"],
            desc: "Mô tả Yeezy Boost 350..."
        }, {
            name: "Nike Zoom",
            brand: "NIKE",
            sub: "NAM",
            price: 2800000,
            size: 39,
            src: "../img/NIKE+AIR+ZOOM+PEGASUS+40+(GS).png",
            tags: [],
            desc: "Mô tả Nike Zoom..."
        }, {
            name: "Tennis Court Pro",
            brand: "GIÀY TENNIS/PICKLEBALL",
            sub: "TENNIS",
            price: 1800000,
            size: 37,
            src: "../img/Tennis Court Pro.png",
            tags: ["NEW"],
            desc: "Mô tả Tennis Court Pro..."
        }, {
            name: "Pickleball X1",
            brand: "GIÀY TENNIS/PICKLEBALL",
            sub: "PICKLEBALL",
            price: 2100000,
            size: 36,
            src: "../img/pickleball shoes.webp",
            tags: ["SALE"],
            desc: "Mô tả Pickleball X1..."
        }, {
            name: "Vans Old Skool",
            brand: "OTHER BRAND",
            sub: "NAM",
            price: 1700000,
            size: 41,
            src: "../img/Vans Old Skool.jpg",
            tags: ["HOT"],
            desc: "Mô tả Vans Old Skool..."
        }, {
            name: "Converse 70s",
            brand: "OTHER BRAND",
            sub: "NU",
            price: 1600000,
            size: 39,
            src: "../img/Converse 70s.webp",
            tags: [],
            desc: "Mô tả Converse 70s..."
        }, {
            name: "Nike Sale 50%",
            brand: "SALE",
            sub: "NAM",
            price: 999000,
            size: 38,
            src: "../img/Nike Sale 50%.png",
            tags: ["SALE"],
            desc: "Mô tả Nike Sale 50%..."
        }, {
            name: "Adidas Sale 30%",
            brand: "SALE",
            sub: "NU",
            price: 1399000,
            size: 40,
            src: "../img/Adidas Sale 30%.jpg",
            tags: ["SALE"],
            desc: "Mô tả Adidas Sale 30%..."
        }, {
            name: "Nike Air Max 90",
            brand: "NIKE",
            sub: "NAM",
            price: 2500000,
            size: 41,
            src: "../img/Nike Air Max 90.jpg",
            tags: ["NEW"],
            desc: "Mô tả Nike Air Max 90..."
        }, {
            name: "Nike React Infinity Run",
            brand: "NIKE",
            sub: "NAM",
            price: 3000000,
            size: 42,
            src: "../img/Nike React Infinity Run.jpg",
            tags: ["NEW"],
            desc: "Mô tả Nike React Infinity Run..."
        }, {
            name: "Adidas Ultraboost 22",
            brand: "ADIDAS",
            sub: "NAM",
            price: 3500000,
            size: 42,
            src: "../img/Adidas Ultraboost 22.jpg",
            tags: ["NEW"],
            desc: "Mô tả Adidas Ultraboost 22..."
        }, {
            name: "Adidas NMD R1",
            brand: "ADIDAS",
            sub: "NU",
            price: 2500000,
            size: 38,
            src: "../img/Adidas NMD R1.jpg",
            tags: ["SALE"],
            desc: "Mô tả Adidas NMD R1..."
        }, {
            name: "Jordan Air Jordan XXX",
            brand: "JORDAN",
            sub: "NAM",
            price: 4000000,
            size: 43,
            src: "../img/Jordan Air Jordan XXX.jpg",
            tags: ["LIMITED"],
            desc: "Mô tả Jordan Air Jordan XXX..."
        }, {
            name: "Yeezy 350 V2",
            brand: "YEEZY",
            sub: "NAM",
            price: 5500000,
            size: 41,
            src: "../img/Yeezy 350 V2.jpg",
            tags: ["HOT"],
            desc: "Mô tả Yeezy 350 V2..."
        }, {
            name: "Puma RS-X",
            brand: "OTHER BRAND",
            sub: "NAM",
            price: 1800000,
            size: 40,
            src: "../img/Puma RS-X.jpg",
            tags: ["NEW"],
            desc: "Mô tả Puma RS-X..."
        }, {
            name: "Reebok Classic",
            brand: "OTHER BRAND",
            sub: "NU",
            price: 1500000,
            size: 38,
            src: "../img/Reebok Classic.jpg",
            tags: ["SALE"],
            desc: "Mô tả Reebok Classic..."
        }];


        let cart = [];
        let paymentSource = '';
        let currentBuyNowProduct = null;

        function updateCartCount() {
            const cartCount = document.getElementById('cartCount');
            cartCount.textContent = cart.length;
        }

        function clearActiveNav() {
            document.querySelectorAll('.navbar-nav .nav-link').forEach(nav => {
                nav.classList.remove('active');
            });
        }

        document.getElementById('checkoutBtn').addEventListener('click', function() {
            paymentSource = 'cart';
            let groupedCart = {};
            cart.forEach(item => {
                groupedCart[item] = (groupedCart[item] || 0) + 1;
            });

            let productInfoHtml = '';
            for (let name in groupedCart) {
                let quantity = groupedCart[name];
                let product = productsData.find(p => p.name === name);
                if (product) {
                    productInfoHtml += `
                    <div class="mb-3 border p-2">
                        <div class="d-flex align-items-center">
                        <img src="${product.src}" alt="${product.name}" style="width:50px; height:50px; object-fit:cover;" class="me-2">
                        <div>
                            <p class="mb-0"><strong>${product.name}</strong></p>
                            <p class="mb-0">Đơn giá: ${product.price.toLocaleString('vi-VN')}₫</p>
                            <p class="mb-0">Số lượng: ${quantity}</p>
                            <p class="mb-0">Tổng: ${(product.price * quantity).toLocaleString('vi-VN')}₫</p>
                        </div>
                        </div>
                    </div>
                    `;
                }
            }
            let total = calculateCartTotal();
            document.getElementById('paymentProductInfo').innerHTML = `
                ${productInfoHtml}
                <hr>
                <p class="text-end fw-bold">Tổng tiền: ${total.toLocaleString('vi-VN')}₫</p>
                `;
            document.getElementById('paymentMethod').value = 'cash';
            document.getElementById('qrCodeSection').style.display = 'none';
            document.getElementById('customerName').value = sessionStorage.getItem('username') || '';

            let paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
            paymentModal.show();
        });




        function calculateCartTotal() {
            let total = 0;
            cart.forEach(itemName => {
                let p = productsData.find(p => p.name === itemName);
                if (p) total += p.price;
            });
            return total;
        }

        function renderCart() {
            clearActiveNav();
            const cartItemsEl = document.getElementById('cartItems');
            cartItemsEl.innerHTML = "";
            if (cart.length === 0) {
                cartItemsEl.innerHTML = "<li class='list-group-item'>Giỏ hàng trống</li>";
            } else {
                cart.forEach((itemName, index) => {
                    let li = document.createElement('li');
                    li.className = "list-group-item d-flex justify-content-between align-items-center";
                    li.innerHTML = `<span>${itemName}</span>
                                    <button class="btn btn-sm btn-danger remove-btn" data-index="${index}">Xóa</button>`;
                    cartItemsEl.appendChild(li);
                });
            }
            let total = calculateCartTotal();
            document.getElementById('cartTotal').textContent = total.toLocaleString('vi-VN') + "₫";
            document.querySelectorAll('.remove-btn').forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    let idx = parseInt(this.getAttribute('data-index'));
                    removeFromCart(idx);
                });
            });
        }

        function removeFromCart(index) {
            cart.splice(index, 1);
            updateCartCount();
            renderCart();
        }




        function createProductCard(product) {
            let tagsHtml = "";
            if (product.tags && product.tags.length > 0) {
                tagsHtml = product.tags
                    .map(tag => `<span class="badge bg-warning text-dark me-1">${tag}</span>`)
                    .join("");
            }
            return `
                    <div class="col-md-3 product-card" data-product="${product.name}">
                        <div class="card mb-4">
                            <img src="${product.src}" class="card-img-top" alt="${product.name}">
                            <div class="card-body">
                                <h5 class="card-title">${product.name}</h5>
                                <div class="mb-2">${tagsHtml}</div>
                                <p class="card-text text-danger fw-bold">
                                    ${product.price.toLocaleString('vi-VN')}₫
                                </p>
                            </div>
                        </div>
                    </div>
                `;
        }



        function attachDetailEvents(containerId) {
            const container = document.getElementById(containerId);
            if (!container) return;
            container.querySelectorAll('.product-card').forEach(card => {
                card.addEventListener('click', function() {
                    let productName = this.getAttribute('data-product');
                    let product = productsData.find(p => p.name === productName);
                    if (product) {
                        showProductDetail(product);
                    }
                });
            });
        }

        function renderProductsByBrand(brand = null) {
            const productContainer = document.getElementById('productContainer');
            productContainer.innerHTML = "";
            const filtered = brand ?
                productsData.filter(p => p.brand === brand) :
                productsData;
            let html = filtered.map(p => createProductCard(p)).join("");
            productContainer.innerHTML = html;
            attachDetailEvents('productContainer');
            document.getElementById('about').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
        }

        let lastSearchResults = [];


        function searchProducts(keyword) {
            clearActiveNav();
            const productContainer = document.getElementById('productContainer');
            const filtered = productsData.filter(p =>
                p.name.toLowerCase().includes(keyword.toLowerCase())
            );
            lastSearchResults = filtered;
            productContainer.innerHTML = "";
            if (filtered.length === 0) {
                productContainer.innerHTML = "<p>Không tìm thấy sản phẩm phù hợp.</p>";
                return;
            }
            let html = filtered.map(p => createProductCard(p)).join("");
            productContainer.innerHTML = html;
            attachDetailEvents('productContainer');
            document.getElementById('about').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
        }

        function renderExtraSections() {
            const highlightData = productsData.filter(p =>
                p.tags.includes("HOT") || p.tags.includes("NEW")
            );
            document.getElementById('highlightContainer').innerHTML = highlightData
                .map(p => createProductCard(p)).join("");
            attachDetailEvents('highlightContainer');

            const saleData = productsData.filter(p => p.tags.includes("SALE"));
            document.getElementById('saleContainer').innerHTML = saleData
                .map(p => createProductCard(p)).join("");
            attachDetailEvents('saleContainer');

            const accessoryData = productsData.filter(p =>
                p.brand === "OTHER BRAND"
            );
            document.getElementById('accessoryContainer').innerHTML = accessoryData
                .map(p => createProductCard(p)).join("");
            attachDetailEvents('accessoryContainer');
        }

        function applyAdvancedFilterOnSearchResults() {
            const productContainer = document.getElementById('productContainer');
            productContainer.innerHTML = "";
            const sizeValue = document.getElementById('sizeFilter').value;
            const priceValue = document.getElementById('priceFilter').value;
            const sortValue = document.getElementById('sortFilter').value;
            let filtered = [...lastSearchResults];
            if (sizeValue) {
                const sizeNum = parseInt(sizeValue, 10);
                filtered = filtered.filter(p => p.size === sizeNum);
            }
            if (priceValue === "under1m") {
                filtered = filtered.filter(p => p.price < 1000000);
            } else if (priceValue === "1to2m") {
                filtered = filtered.filter(p => p.price >= 1000000 && p.price <= 2000000);
            } else if (priceValue === "over2m") {
                filtered = filtered.filter(p => p.price > 2000000);
            }
            if (sortValue === "asc") {
                filtered.sort((a, b) => a.price - b.price);
            } else if (sortValue === "desc") {
                filtered.sort((a, b) => b.price - a.price);
            }
            if (filtered.length === 0) {
                productContainer.innerHTML = "<p>Không tìm thấy sản phẩm phù hợp.</p>";
                return;
            }
            let html = filtered.map(p => createProductCard(p)).join("");
            productContainer.innerHTML = html;
            attachDetailEvents('productContainer');
        }

        function filterProducts(brand, sub) {
            const brandLower = brand ? brand.toLowerCase() : "";
            const subLower = sub ? sub.toLowerCase() : "";
            let filtered = productsData.filter(p => {
                return p.brand.toLowerCase() === brandLower;
            });
            if (subLower) {
                filtered = filtered.filter(p => {
                    return p.sub && p.sub.toLowerCase() === subLower;
                });
            }

            console.log("Filtered products:", filtered);
            const productContainer = document.getElementById('productContainer');
            productContainer.innerHTML = filtered.length ?
                filtered.map(p => createProductCard(p)).join("") :
                "<p>Không tìm thấy sản phẩm phù hợp.</p>";

            attachDetailEvents('productContainer');
            document.getElementById('highlightSection').style.display = 'none';
            document.getElementById('saleSection').style.display = 'none';
            document.getElementById('accessorySection').style.display = 'none';
            document.getElementById('productDetail').style.display = 'none';
            document.getElementById('cartSection').style.display = 'none';
            document.getElementById('about').style.display = 'none';

            document.getElementById('productsSection').style.display = 'block';
            document.getElementById('productsSection').scrollIntoView({
                behavior: 'smooth'
            });
        }

        function showProductDetail(product) {
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('highlightSection').style.display = 'none';
            document.getElementById('saleSection').style.display = 'none';
            document.getElementById('accessorySection').style.display = 'none';
            document.getElementById('advancedFilterRow').style.display = 'none';
            document.getElementById('about').style.display = 'none';
            document.getElementById('productDetail').style.display = 'block';
            document.getElementById('detailProductImage').src = product.src;
            document.getElementById('detailProductName').textContent = product.name;
            document.getElementById('detailProductPrice').textContent =
                product.price.toLocaleString('vi-VN') + "₫";
            let sizeSelect = document.getElementById('detailProductSizeSelect');
            sizeSelect.innerHTML = "";
            let possibleSizes = [product.size, product.size + 1, product.size - 1].filter(s => s > 0);
            possibleSizes.forEach(sz => {
                let opt = document.createElement('option');
                opt.value = sz;
                opt.textContent = sz;
                sizeSelect.appendChild(opt);
            });
            document.getElementById('detailProductQty').value = 1;
            let desc = product.desc ? product.desc : "Không có mô tả...";
            document.getElementById('detailProductDesc').textContent = desc;
            document.getElementById('detailAddToCartBtn').onclick = function() {
                let qty = parseInt(document.getElementById('detailProductQty').value, 10) || 1;
                for (let i = 0; i < qty; i++) {
                    cart.push(product.name);
                }
                alert(product.name + " (x" + qty + ") đã được thêm vào giỏ hàng!");
                updateCartCount();
            };


            document.getElementById('detailBuyNowBtn').onclick = function() {
                let qty = parseInt(document.getElementById('detailProductQty').value, 10) || 1;
                currentBuyNowProduct = {...product,
                    quantity: qty
                };
                paymentSource = 'buyNow';
                let total = currentBuyNowProduct.price * currentBuyNowProduct.quantity;
                document.getElementById('paymentProductInfo').innerHTML = `
                    <div class="d-flex align-items-center">
                        <img src="${currentBuyNowProduct.src}" alt="${currentBuyNowProduct.name}" style="width:50px; height:50px; object-fit:cover;" class="me-2">
                        <div>
                        <p class="mb-0"><strong>${currentBuyNowProduct.name}</strong></p>
                        <p class="mb-0">Số lượng: ${currentBuyNowProduct.quantity}</p>
                        <p class="mb-0">Đơn giá: ${currentBuyNowProduct.price.toLocaleString('vi-VN')}₫</p>
                        <p class="mb-0">Tổng: ${total.toLocaleString('vi-VN')}₫</p>
                        </div>
                    </div>
                    `;
                document.getElementById('paymentMethod').value = 'cash';
                document.getElementById('qrCodeSection').style.display = 'none';
                document.getElementById('customerName').value = sessionStorage.getItem('username') || '';

                let paymentModal = new bootstrap.Modal(document.getElementById('paymentModal'));
                paymentModal.show();
            };
            document.getElementById('productDetail').scrollIntoView({

                behavior: 'smooth'
            });
        }
        document.addEventListener('DOMContentLoaded', function() {
            history.scrollRestoration = 'manual';
            renderProductsByBrand();
            renderExtraSections();
            document.querySelectorAll('.category-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.navbar-nav .nav-link').forEach(nav => {
                        nav.classList.remove('active');
                    });
                    this.classList.add('active');
                    let brand = this.getAttribute('data-brand');
                    let sub = this.getAttribute('data-sub');
                    console.log("Click: brand =", brand, ", sub =", sub);
                    filterProducts(brand, sub);
                    document.getElementById('advancedFilterRow').style.display = 'none';
                    document.getElementById('about').style.display = 'none';
                    document.getElementById('productDetail').style.display = 'none';
                    document.getElementById('highlightSection').style.display = 'none';
                    document.getElementById('saleSection').style.display = 'none';
                    document.getElementById('accessorySection').style.display = 'none';
                    document.getElementById('cartSection').style.display = 'none';
                    document.getElementById('productsSection').scrollIntoView({
                        behavior: 'smooth'
                    });
                });
            });
            const searchForm = document.getElementById('searchForm');
            searchForm.addEventListener('submit', function(e) {
                e.preventDefault();

                const keyword = document.getElementById('searchInput').value.trim();
                if (keyword) {
                    document.getElementById('highlightSection').style.display = 'none';
                    document.getElementById('saleSection').style.display = 'none';
                    document.getElementById('productDetail').style.display = 'none';
                    document.getElementById('accessorySection').style.display = 'none';
                    document.getElementById('advancedFilterRow').style.display = 'flex';
                    document.getElementById('cartSection').style.display = 'none';
                    renderProductsByBrand();
                    searchProducts(keyword);
                    document.getElementById('productsSection').style.display = 'block';
                    document.getElementById('about').style.display = 'none';
                } else {
                    document.getElementById('highlightSection').style.display = 'block';
                    document.getElementById('saleSection').style.display = 'block';
                    document.getElementById('accessorySection').style.display = 'block';
                    document.getElementById('advancedFilterRow').style.display = 'none';
                    document.getElementById('about').style.display = 'none';
                    document.getElementById('productDetail').style.display = 'none';
                    document.getElementById('cartSection').style.display = 'none';
                    renderProductsByBrand();
                    document.getElementById('productsSection').style.display = 'block';
                }
            });
            document.getElementById('advancedFilterBtn').addEventListener('click', function() {
                applyAdvancedFilterOnSearchResults();
            });
            document.querySelector('a.nav-link[href="#about"]').addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelectorAll('.navbar-nav .nav-link').forEach(nav => {
                    nav.classList.remove('active');
                });
                this.classList.add('active');
                document.getElementById('productsSection').style.display = 'none';
                document.getElementById('highlightSection').style.display = 'none';
                document.getElementById('saleSection').style.display = 'none';
                document.getElementById('accessorySection').style.display = 'none';
                document.getElementById('advancedFilterRow').style.display = 'none';
                document.getElementById('productDetail').style.display = 'none';
                document.getElementById('cartSection').style.display = 'none';
                document.getElementById('about').style.display = 'block';
                document.getElementById('about').scrollIntoView({
                    behavior: 'smooth'
                });
            });

        });



        document.getElementById('openCartBtn').addEventListener('click', function(e) {
            e.preventDefault();
            document.getElementById('productsSection').style.display = 'none';
            document.getElementById('highlightSection').style.display = 'none';
            document.getElementById('saleSection').style.display = 'none';
            document.getElementById('accessorySection').style.display = 'none';
            document.getElementById('about').style.display = 'none';
            document.getElementById('productDetail').style.display = 'none';
            document.getElementById('advancedFilterRow').style.display = 'none';
            document.getElementById('cartSection').style.display = 'block';
            renderCart();
            document.getElementById('cartSection').scrollIntoView({
                behavior: 'smooth'
            });
        });

        document.getElementById('closeCartBtn').addEventListener('click', function() {
            location.reload()
            document.getElementById('cartSection').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
            document.getElementById('highlightSection').style.display = 'block';
            document.getElementById('saleSection').style.display = 'block';
            document.getElementById('accessorySection').style.display = 'block';
        });
        ////
        document.getElementById('paymentMethod').addEventListener('change', function() {
            if (this.value === 'transfer') {
                document.getElementById('qrCodeSection').style.display = 'block';
            } else {
                document.getElementById('qrCodeSection').style.display = 'none';
            }
        });


        document.getElementById('confirmPaymentBtn').addEventListener('click', function() {
            alert("Thanh toán thành công!");
            if (paymentSource === 'cart') {
                cart = [];
                updateCartCount();
                if (cart.length === 0) {
                    cartItems.innerHTML = "<li class='list-group-item'>Giỏ hàng trống</li>";
                    renderCart()
                } else {
                    cart.forEach(item => {
                        let li = document.createElement('li');
                        li.className = "list-group-item";
                        li.textContent = item;
                        cartItems.appendChild(li);
                    });
                }
            }
            let paymentModal = bootstrap.Modal.getInstance(document.getElementById('paymentModal'));
            if (paymentModal) {
                paymentModal.hide();
            }
        });


        document.getElementById('confirmInvoiceBtn').addEventListener('click', function() {
            alert("Thanh toán thành công!");
            currentBuyNowProduct = null;
            let invoiceModalInstance = bootstrap.Modal.getInstance(document.getElementById('invoiceModal'));
            invoiceModalInstance.hide();
            document.getElementById('productDetail').style.display = 'none';
            document.getElementById('productsSection').style.display = 'block';
            document.getElementById('highlightSection').style.display = 'block';
            document.getElementById('saleSection').style.display = 'block';
            document.getElementById('accessorySection').style.display = 'block';
        });

        function hienHoaDon() {
            const name = document.getElementById("customerName").value;
            const phone = document.getElementById("customerPhone").value;
            const method = document.getElementById("paymentMethod").value;

            let invoiceHTML = `
                <h5>🧾 HÓA ĐƠN MUA HÀNG</h5>
                <h6 class="mt-3"> Cửa hàng: <strong>TYNISSHOES.VN</strong></h6>
                <p> Địa chỉ: 12 nguyenvanbao - P5 - Gò Vấp - TPHCM</p>
                <p> Hotline: 0123654789</p>
                <p> Website: tynisshoes.vn</p>
                <p><strong> Khách hàng:</strong> ${name}</p>
                <p><strong> SĐT:</strong> ${phone}</p>
                <p><strong>Thanh toán:</strong> ${method === "cash" ? "Tiền mặt" : "Chuyển khoản"}</p>
                <hr>
                <h6> Sản phẩm đã mua:</h6>
            `;

            if (paymentSource === 'cart') {
                let groupedCart = {};
                cart.forEach(item => {
                    groupedCart[item] = (groupedCart[item] || 0) + 1;
                });

                for (let name in groupedCart) {
                    let quantity = groupedCart[name];
                    let product = productsData.find(p => p.name === name);
                    if (product) {
                        invoiceHTML += `
                            <div class="mb-2">
                                <p class="mb-0"><strong>${product.name}</strong></p>
                                <p class="mb-0">Số lượng: ${quantity}</p>
                                <p class="mb-0">Đơn giá: ${product.price.toLocaleString('vi-VN')}₫</p>
                                <p class="mb-1">Tổng: ${(product.price * quantity).toLocaleString('vi-VN')}₫</p>
                            </div>
                            <hr>
                        `;
                    }
                }
            } else {
                // Trường hợp "Mua Ngay"
                const product = currentBuyNowProduct;
                if (product) {
                    invoiceHTML += `
                        <div class="mb-2">
                            <p class="mb-0"><strong>${product.name}</strong></p>
                            <p class="mb-0">Số lượng: ${product.quantity}</p>
                            <p class="mb-0">Đơn giá: ${product.price.toLocaleString('vi-VN')}₫</p>
                            <p class="mb-1">Tổng: ${(product.price * product.quantity).toLocaleString('vi-VN')}₫</p>
                        </div>
                        <hr>
                    `;
                }
            }

            document.getElementById("invoiceContent").innerHTML = invoiceHTML;
            let paymentModal = bootstrap.Modal.getInstance(document.getElementById("paymentModal"));
            paymentModal.hide();
            let invoiceModal = new bootstrap.Modal(document.getElementById("invoiceModal"));
            invoiceModal.show();

            // Xóa giỏ hàng nếu thanh toán từ cart
            if (paymentSource === 'cart') {
                cart = []; // Xóa toàn bộ giỏ hàng
                updateCartCount(); // Cập nhật số lượng giỏ hàng
                renderCart(); // Làm mới giao diện giỏ hàng
                alert("Thanh toán thành công! Giỏ hàng đã được xóa.");
            } else {
                // Trường hợp "Mua Ngay"
                currentBuyNowProduct = null;
                alert("Thanh toán thành công!");
            }
        }

        function openModal() {
            console.log('Open modal clicked');
            const modal = document.getElementById('loginModal');
            modal.classList.add('show');
        }

        function closeModal() {
            console.log('Close modal called');
            const modal = document.getElementById('loginModal');
            if (modal) {
                modal.classList.remove('show');
                const errorMessage = document.getElementById('errorMessage');
                if (errorMessage) {
                    errorMessage.style.display = 'none';
                    errorMessage.textContent = '';
                }
                // Clear any Bootstrap modal state
                document.body.classList.remove('modal-open');
                const backdrop = document.querySelector('.modal-backdrop');
                if (backdrop) backdrop.remove();
                console.log('Modal closed');
            } else {
                console.error('Login modal not found');
            }
        }

        function handleLogin() {
            console.log('Login button clicked');
            alert('Login button clicked'); // Temporary alert to confirm click

            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const errorMessage = document.getElementById('errorMessage');
            if (!username || !password || !errorMessage) {
                console.error('Form elements missing:', {
                    username: !!username,
                    password: !!password,
                    errorMessage: !!errorMessage
                });
                alert('Error: Form elements not found');
                return;
            }

            // Username validation: at least 3 characters, no special characters
            const usernameRegex = /^[a-zA-Z0-9]{3,}$/;
            if (!usernameRegex.test(username)) {
                errorMessage.textContent = 'Tên đăng nhập phải có ít nhất 3 ký tự và không chứa ký tự đặc biệt.';
                errorMessage.style.display = 'block';
                console.log('Username validation failed');
                return;
            }

            // Password validation: must be "123"
            if (password !== '123') {
                errorMessage.textContent = 'Mật khẩu không đúng.';
                errorMessage.style.display = 'block';
                console.log('Password validation failed');
                return;
            }

            // Login successful
            console.log('Login successful, username:', username);
            sessionStorage.setItem('username', username);
            closeModal();
            updateLoginButton(username);
        }

        function updateLoginButton(username) {
            console.log('Updating UI with username:', username);
            const loginLink = document.getElementById('loginLink');
            loginLink.style.display = 'none';
            const existingContainer = document.querySelector('.user-container');
            if (existingContainer) {
                existingContainer.remove();
                console.log('Removed existing user container');
            }
            const userContainer = document.createElement('div');
            userContainer.className = 'user-container';
            userContainer.innerHTML = `
                <span class="nav-link" style="font-size: 14px; padding: 0.25rem 0.5rem;">${username}</span>
                <button class="logout-btn" onclick="handleLogout()">ĐĂNG XUẤT</button>
            `;
            loginLink.parentNode.insertBefore(userContainer, loginLink);
            console.log('User container added');
        }

        function handleLogout() {
            console.log('Logout clicked');
            sessionStorage.removeItem('username');
            const userContainer = document.querySelector('.user-container');
            if (userContainer) userContainer.remove();
            const loginLink = document.getElementById('loginLink');
            loginLink.style.display = 'block';
            console.log('Logged out, login link restored');
        }

        // Initialize on DOM load
        document.addEventListener('DOMContentLoaded', () => {
            console.log('DOM loaded');
            const loginButton = document.getElementById('loginButton');
            const loginModal = document.getElementById('loginModal');
            const loginLink = document.getElementById('loginLink');

            if (!loginButton || !loginModal || !loginLink) {
                console.error('Critical elements missing:', {
                    loginButton: !!loginButton,
                    loginModal: !!loginModal,
                    loginLink: !!loginLink
                });
                alert('Error: Page elements not found. Check console.');
                return;
            }

            // Check if already logged in
            const username = sessionStorage.getItem('username');
            if (username) {
                console.log('User already logged in:', username);
                updateLoginButton(username);
            }
        });

        function goToHome() {
            clearActiveNav();
            document.getElementById('productsSection').style.display = 'block';
            document.getElementById('highlightSection').style.display = 'block';
            document.getElementById('saleSection').style.display = 'block';
            document.getElementById('accessorySection').style.display = 'block';
            document.getElementById('about').style.display = 'none';
            document.getElementById('productDetail').style.display = 'none';
            document.getElementById('cartSection').style.display = 'none';
            document.getElementById('advancedFilterRow').style.display = 'none';

            renderProductsByBrand(); // load lại sản phẩm
            renderExtraSections(); // load lại phần nổi bật, khuyến mãi...
            document.getElementById('productsSection').scrollIntoView({
                behavior: 'smooth'
            });
        }
    </script>
</body>

</html>